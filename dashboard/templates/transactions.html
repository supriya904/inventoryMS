<div class="transactions-container">
    <h2>Transaction History</h2>
    <div class="table-container">
        <table id="transactionsTable">
            <thead>
                <tr>
                    <th>Transaction ID</th>
                    <th>Product Name</th>
                    <th>Type</th>
                    <th>Quantity</th>
                    <th>Date</th>
                    <th>Remarks</th>
                </tr>
            </thead>
            <tbody id="transactionsBody">
                <!-- Data will be loaded dynamically -->
            </tbody>
        </table>
    </div>
</div>

<style>
.transactions-container {
    padding: 20px;
}

.table-container {
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #f5f5f5;
    font-weight: bold;
}

tr:hover {
    background-color: #f9f9f9;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadTransactions();
});

function loadTransactions() {
    fetch('../api/get_transactions.php')
    .then(response => response.json())
    .then(data => {
        const tbody = document.getElementById('transactionsBody');
        tbody.innerHTML = '';
        
        if (data.length === 0) {
            tbody.innerHTML = '<tr><td colspan="6" style="text-align: center;">No transactions found</td></tr>';
            return;
        }
        
        data.forEach(transaction => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${transaction.Transaction_ID}</td>
                <td>${transaction.Product_Name}</td>
                <td>${transaction.Transaction_Type}</td>
                <td>${transaction.Quantity}</td>
                <td>${transaction.Transaction_Date}</td>
                <td>${transaction.Remarks || '-'}</td>
            `;
            tbody.appendChild(row);
        });
    })
    .catch(error => {
        console.error('Error loading transactions:', error);
        const tbody = document.getElementById('transactionsBody');
        tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: red;">Error loading transactions</td></tr>';
    });
}
</script>
